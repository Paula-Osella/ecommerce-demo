---
import "../styles/global.css";

interface Props {
  title?: string;
}


const { fullWidth = true } = Astro.props;
const { title = "Demo e-commerce" } = Astro.props;
---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" class="h-full"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/Logo/Logo2.png">
    <title>{title}</title>
  </head>
  <body class="min-h-screen flex flex-col h-full">

      {/* CONTENIDO DE CADA PÁGINA */}
      <main class={`flex-1 w-full h-full ${fullWidth ? "px-0" : "max-w-6xl mx-auto px-4"} `}>
        <slot />
      </main>

      {/* OVERLAY DE BÚSQUEDA (para mobile) */}
      <div
        id="search-overlay"
        class="fixed inset-0 bg-black/40 z-40 hidden items-start justify-center pt-24 px-4"
      >
        <div class="w-full max-w-4xl bg-white rounded-3xl shadow-2xl border border-zinc-200 overflow-hidden">
          {/* Barra de búsqueda */}
          <div class="px-6 py-4 border-b border-zinc-100 flex items-center gap-4">
            <button
              type="button"
              class="flex items-center gap-2 px-4 py-2 rounded-full bg-zinc-100 text-xs font-medium text-zinc-700"
            >
              <span>Todas las categorías</span>
              <span class="text-[10px]">▾</span>
            </button>

            <div class="flex-1 flex items-center gap-3">
              <input
                type="text"
                placeholder="Buscar productos"
                class="w-full text-sm px-4 py-2 rounded-full border border-zinc-200 focus:outline-none focus:border-pink-400"
              />
              <button
                type="button"
                class="h-9 w-9 rounded-full bg-zinc-900 text-white flex items-center justify-center hover:bg-pink-700 transition-colors"
              >
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                  class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.6"
                  stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="11" cy="11" r="6" />
                  <line x1="16" y1="16" x2="21" y2="21" />
                </svg>
              </button>
            </div>

            <button
              type="button"
              id="close-search"
              class="text-sm text-zinc-400 hover:text-zinc-700"
            >
              ✕
            </button>
          </div>

          {/* Búsqueda popular */}
          <div class="px-6 py-4 space-y-2">
            <p class="text-xs font-semibold text-zinc-500 uppercase tracking-wide">
              Búsqueda popular
            </p>
            <div class="flex flex-wrap gap-2 text-sm">
              <button class="px-3 py-1.5 rounded-full bg-zinc-100 hover:bg-pink-50 hover:text-pink-700 transition-colors">
                acné
              </button>
              <button class="px-3 py-1.5 rounded-full bg-zinc-100 hover:bg-pink-50 hover:text-pink-700 transition-colors">
                antienvejecimiento
              </button>
              <button class="px-3 py-1.5 rounded-full bg-zinc-100 hover:bg-pink-50 hover:text-pink-700 transition-colors">
                hiperpigmentación
              </button>
              <button class="px-3 py-1.5 rounded-full bg-zinc-100 hover:bg-pink-50 hover:text-pink-700 transition-colors">
                protección solar
              </button>
              <button class="px-3 py-1.5 rounded-full bg-zinc-100 hover:bg-pink-50 hover:text-pink-700 transition-colors">
                humectantes
              </button>
              <button class="px-3 py-1.5 rounded-full bg-zinc-100 hover:bg-pink-50 hover:text-pink-700 transition-colors">
                limpiador
              </button>
              <button class="px-3 py-1.5 rounded-full bg-zinc-100 hover:bg-pink-50 hover:text-pink-700 transition-colors">
                otro
              </button>
            </div>
          </div>
        </div>
      </div>

      <style>
        footer a {
          display: inline-block;
        }
      </style>

      <script>
        if (typeof window !== "undefined") {
          // ---- MENÚ HAMBURGUESA ----
          const menuBtn = document.getElementById("menu-toggle");
          const mobileMenu = document.getElementById("mobile-menu");

          if (menuBtn && mobileMenu) {
            menuBtn.addEventListener("click", () => {
              mobileMenu.classList.toggle("hidden");
            });

            document.addEventListener("click", (e) => {
              if (!menuBtn.contains(e.target) && !mobileMenu.contains(e.target)) {
                mobileMenu.classList.add("hidden");
              }
            });
          }

          // ---- BUSCADOR OVERLAY ----
          const searchOverlay = document.getElementById("search-overlay");
          const closeSearchBtn = document.getElementById("close-search");
          const openSearchButtons = document.querySelectorAll("[data-open-search]");

          const openSearch = () => {
            if (!searchOverlay) return;
            searchOverlay.classList.remove("hidden");
            searchOverlay.classList.add("flex");
          };

          const closeSearch = () => {
            if (!searchOverlay) return;
            searchOverlay.classList.add("hidden");
            searchOverlay.classList.remove("flex");
          };

          openSearchButtons.forEach((btn) => {
            btn.addEventListener("click", openSearch);
          });

          closeSearchBtn?.addEventListener("click", closeSearch);

          searchOverlay?.addEventListener("click", (e) => {
            if (e.target === searchOverlay) {
              closeSearch();
            }
          });

          window.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
              closeSearch();
            }
          });
        }
      </script>
  </body>
</html>
